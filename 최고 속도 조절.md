# ìµœê³  ì†ë„ ì¡°ì ˆ

> ê²½ê¸° ì¤‘ ì˜¤ë¥´ë§‰ ì´ìŠˆë¡œ ì¸í•´ ë¡œë´‡ë“¤ì˜ ìµœê³  ì†ë„ë§Œì„ ë³„ë„ë¡œ ì¡°ì ˆí•˜ëŠ” APIë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
> 
> 
> ì´ì— ëŒ€í•´ì„œ ì‚¬ìš©ë²•ì„ ë‚¨ê¹ë‹ˆë‹¤.
> 

## ğŸ“¢ API ì„¤ëª…

---

```bash
{
	"speed":{
		"key": "maxSpeed",
		"value": ë³€ê²½ê°’
	}
}
```

ìµœê³  ì†ë„ë¥¼ ë°”ê¾¸ê¸¸ ì›í•˜ëŠ” SpiderCarì˜ **DataChannel**ë¡œ ìœ„ì™€ ê°™ì€ í˜•ì‹ì˜ **Json**ì„ ë°œì†¡í•˜ë©´ ë©ë‹ˆë‹¤.

<aside>
ğŸ’¡ ì´ë•Œì˜  ë³€ê²½ê°’ì€ ì˜ˆë¥¼ ë“¤ë©´ 420ê³¼ ê°™ì€ 3ìë¦¬ ìˆ«ìì…ë‹ˆë‹¤.

</aside>

## ğŸ“¢ ë³€ê²½ ë¡œì§ê³¼ Response

> ìš°ë¦¬ê°€ ì£¼ë¡œ ì‚´í´ë³¼ ì½”ë“œëŠ” ì•„ë˜ ë¶€ë¶„ì…ë‹ˆë‹¤.
> 
> 
> ì•„ê¹Œì˜ APIëŒ€ë¡œ Requestë¥¼ ë³´ëƒˆì„ ë•Œ, ë¡œë´‡ ë‹¨ì—ì„œ ì´ë¥¼ ì „ë‹¬ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œì´ì§€ìš”.
> 
- **ìµœëŒ€ ì†ë„ ë³€ê²½ ë° ì €ì¥ ë¡œì§**

```python
elif "speed" in self._stream_data:
  print(self._stream_data["speed"])
  if self._stream_data["speed"]["key"] == "maxSpeed":
      self._myCar.speed_max = self._stream_data["speed"]["value"]
      self.calcControlParams()

      with open(JSON_FILE, 'w') as f:
          self.config_dict["Calibration"]["THROTTLE_MAX"] = self._myCar.speed_max
          SPIDER_CARS[CAR_NAME] = self.config_dict
          json.dump(SPIDER_CARS, f, indent=4)

      recali_metric = {"speed": {"key": "maxSpeed", "value": self._myCar.speed_max}}
      self._dc_metric.put_nowait(recali_metric)
  continue
```

í˜•ì‹ì— ë§ëŠ” Json Requestë¥¼ ë°›ì•˜ë‹¤ë©´, ì°¨ëŸ‰ì˜ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì¸ `speed_max`ì˜ ê°’ì„ ë³€ê²½í•©ë‹ˆë‹¤.

ë”ë¶ˆì–´, í˜„ì¬ì˜ ì†ë„ ì²´ê³„ëŠ” 1 â‡’ 10ìœ¼ë¡œ ì†ë„ê°€ ì˜¬ë¼ê°ˆìˆ˜ë¡ ìµœëŒ€ ì†ë„ì— ì ì°¨ ì„ í˜•ì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì¸ë°ìš”, ì´ì— ì†ë„ì˜ ê³„ì‚°ì´ ë‹¤ì‹œ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤. 

ë”°ë¼ì„œ  `calcControlParams` ë¼ëŠ” ë©”ì†Œë“œë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•©ë‹ˆë‹¤. 

```python
self._myCar.speed_max = self._stream_data["speed"]["value"]
self.calcControlParams()
```

ë³€ê²½ëœ ìµœê³  ì†ë„ê°’ì„ ë‹¤ì‹œ ì €ì¥í•´ì•¼ ì˜ë¯¸ê°€ ìˆê² ì§€ìš”, ì´ì— ëŒ€í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```python
with open(JSON_FILE, 'w') as f:
    self.config_dict["Calibration"]["THROTTLE_MAX"] = self._myCar.speed_max
    SPIDER_CARS[CAR_NAME] = self.config_dict
    json.dump(SPIDER_CARS, f, indent=4)
```

íŒŒì´ì¬ì˜ json íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ê²½ëœ ë‚´ìš©ë“¤ì„ ì •ì  json íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.

ë³€ê²½ê³¼ ì €ì¥ì´ ì™„ë£Œëœ ì´í›„ì—ëŠ” í™•ì¸ì„ ìœ„í•´ Echoë¥¼ ë³´ëƒ…ë‹ˆë‹¤. 

```python
recali_metric = {"speed": {"key": "maxSpeed", "value": self._myCar.speed_max}}
self._dc_metric.put_nowait(recali_metric)
```